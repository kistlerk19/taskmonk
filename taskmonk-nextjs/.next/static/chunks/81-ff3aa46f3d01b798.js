"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{32662:function(e,s,a){a.d(s,{Z:function(){return g}});var t=a(85893),i=a(67294),r=a(44080),n=a(46125),l=a(42237),o=a(13564),d=a(7543),c=a(13658),m=a(30097),h=a(31415),u=a(43407),x=a(41664),p=a.n(x),f=a(11163),v=a(16678);let j=[{name:"Dashboard",href:"/dashboard",icon:l.Z},{name:"Tasks",href:"/tasks",icon:o.Z},{name:"Teams",href:"/teams",icon:d.Z},{name:"Reports",href:"/reports",icon:c.Z},{name:"Profile",href:"/profile",icon:m.Z}];function g(e){let{children:s}=e,[a,l]=(0,i.useState)(!1),o=(0,f.useRouter)(),{user:d,signOut:c}=(0,v.a)(),m=async()=>{await c(),o.push("/auth/signin")};return(0,t.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[(0,t.jsx)(r.u.Root,{show:a,as:i.Fragment,children:(0,t.jsxs)(n.V,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:l,children:[(0,t.jsx)(r.u.Child,{as:i.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)(n.V.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,t.jsx)(r.u.Child,{as:i.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,t.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-primary-700",children:[(0,t.jsx)(r.u.Child,{as:i.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,t.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>l(!1),children:[(0,t.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,t.jsx)(h.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,t.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,t.jsx)("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:(0,t.jsx)("nav",{className:"px-2 space-y-1",children:j.map(e=>{let s=o.pathname.startsWith(e.href);return(0,t.jsxs)(p(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-base font-medium rounded-md"),children:[(0,t.jsx)(e.icon,{className:"mr-4 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})}),(0,t.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})}),(0,t.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,t.jsx)("div",{className:"flex flex-col w-64",children:(0,t.jsxs)("div",{className:"flex flex-col h-0 flex-1",children:[(0,t.jsx)("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary-800",children:(0,t.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,t.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto bg-primary-700",children:(0,t.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:j.map(e=>{let s=o.pathname.startsWith(e.href);return(0,t.jsxs)(p(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[(0,t.jsx)(e.icon,{className:"mr-3 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})})}),(0,t.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[(0,t.jsxs)("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>l(!0),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,t.jsx)(u.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,t.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center"}),(0,t.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-gray-700 mr-4",children:null==d?void 0:d.email}),(0,t.jsx)("button",{onClick:m,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Sign out"})]})})]})]}),(0,t.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none p-6",children:s})]})]})}},90879:function(e,s,a){a.d(s,{Z:function(){return o}});var t=a(85893),i=a(67294),r=a(11163),n=a(88767),l=a(83858);function o(e){var s;let{taskId:a}=e,o=(0,r.useRouter)(),d=(0,n.useQueryClient)(),c=!!a,[m,h]=(0,i.useState)({title:"",description:"",status:"todo",priority:"medium",assigneeId:"",teamId:"",dueDate:""}),[u,x]=(0,i.useState)(""),{data:p,isLoading:f}=(0,n.useQuery)(["task",a],()=>l.h.get("/tasks/".concat(a)),{enabled:c,onSuccess:e=>{h({title:e.title,description:e.description,status:e.status,priority:e.priority,assigneeId:e.assigneeId,teamId:e.teamId,dueDate:e.dueDate?e.dueDate.split("T")[0]:""})}}),{data:v,isLoading:j}=(0,n.useQuery)("teams",()=>l.h.get("/teams")),g=(0,n.useMutation)(e=>l.h.post("/tasks",e),{onSuccess:()=>{d.invalidateQueries("tasks"),o.push("/tasks")},onError:e=>{x(e.message||"Failed to create task")}}),y=(0,n.useMutation)(e=>l.h.put("/tasks/".concat(a),e),{onSuccess:()=>{d.invalidateQueries(["task",a]),d.invalidateQueries("tasks"),o.push("/tasks/".concat(a))},onError:e=>{x(e.message||"Failed to update task")}}),N=e=>{let{name:s,value:a}=e.target;h(e=>({...e,[s]:a}))},b=async e=>{e.preventDefault(),x("");try{c?await y.mutateAsync(m):await g.mutateAsync(m)}catch(e){}};return c&&f?(0,t.jsx)("div",{className:"text-center py-4",children:"Loading task..."}):(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,t.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:c?"Edit Task":"Create New Task"})}),u&&(0,t.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mx-6",children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:u})})})}),(0,t.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,t.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,t.jsx)("input",{type:"text",id:"title",name:"title",value:m.title,onChange:N,required:!0,className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",rows:3,value:m.description,onChange:N,className:"form-input"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,t.jsxs)("select",{id:"status",name:"status",value:m.status,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"todo",children:"To Do"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"review",children:"In Review"}),(0,t.jsx)("option",{value:"done",children:"Done"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"priority",className:"form-label",children:"Priority"}),(0,t.jsxs)("select",{id:"priority",name:"priority",value:m.priority,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"low",children:"Low"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"high",children:"High"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"teamId",className:"form-label",children:"Team"}),(0,t.jsxs)("select",{id:"teamId",name:"teamId",value:m.teamId,onChange:N,required:!0,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Select a team"}),null==v?void 0:v.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"assigneeId",className:"form-label",children:"Assignee"}),(0,t.jsxs)("select",{id:"assigneeId",name:"assigneeId",value:m.assigneeId,onChange:N,className:"form-input",children:[(0,t.jsx)("option",{value:"",children:"Unassigned"}),null===(s=null==v?void 0:v.find(e=>e.id===m.teamId))||void 0===s?void 0:s.members.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),(0,t.jsx)("input",{type:"date",id:"dueDate",name:"dueDate",value:m.dueDate,onChange:N,className:"form-input"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o.back(),className:"btn btn-secondary",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:g.isLoading||y.isLoading,className:"btn btn-primary",children:g.isLoading||y.isLoading?"Saving...":c?"Update Task":"Create Task"})]})]})})]})}},83858:function(e,s,a){a.d(s,{h:function(){return o}});var t=a(29217);class i extends Error{constructor(e,s=500,a=null){super(e),this.name="ApiError",this.status=s,this.data=a}}async function r(e){try{let s=await e.json();return new i(s.message||e.statusText||"API Error",e.status,s)}catch(s){return new i(e.statusText||"API Error",e.status)}}async function n(){try{let e=await t.g.currentSession(),s=e.getIdToken().getJwtToken();return{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}catch(e){return{"Content-Type":"application/json"}}}async function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await n(),t=await fetch("".concat("https://e9fra35uv2.execute-api.eu-west-1.amazonaws.com/dev/").concat(e),{...s,headers:{...a,...s.headers||{}}});if(!t.ok)throw await r(t);return t.json()}catch(e){if(e instanceof i)throw e;if(e instanceof Error)throw new i(e.message);throw new i("An unexpected error occurred")}}let o={get:e=>l(e,{method:"GET"}),post:(e,s)=>l(e,{method:"POST",body:JSON.stringify(s)}),put:(e,s)=>l(e,{method:"PUT",body:JSON.stringify(s)}),delete:e=>l(e,{method:"DELETE"})}}}]);