(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{99813:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(39227)}])},32662:function(e,s,t){"use strict";t.d(s,{Z:function(){return j}});var a=t(85893),r=t(67294),n=t(44080),i=t(46125),l=t(42237),c=t(13564),o=t(7543),d=t(13658),m=t(30097),x=t(31415),h=t(43407),u=t(41664),p=t.n(u),f=t(11163),y=t(16678);let g=[{name:"Dashboard",href:"/dashboard",icon:l.Z},{name:"Tasks",href:"/tasks",icon:c.Z},{name:"Teams",href:"/teams",icon:o.Z},{name:"Reports",href:"/reports",icon:d.Z},{name:"Profile",href:"/profile",icon:m.Z}];function j(e){let{children:s}=e,[t,l]=(0,r.useState)(!1),c=(0,f.useRouter)(),{user:o,signOut:d}=(0,y.a)(),m=async()=>{await d(),c.push("/auth/signin")};return(0,a.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[(0,a.jsx)(n.u.Root,{show:t,as:r.Fragment,children:(0,a.jsxs)(i.V,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:l,children:[(0,a.jsx)(n.u.Child,{as:r.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(i.V.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,a.jsx)(n.u.Child,{as:r.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,a.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-primary-700",children:[(0,a.jsx)(n.u.Child,{as:r.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,a.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>l(!1),children:[(0,a.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,a.jsx)(x.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,a.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,a.jsx)("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:(0,a.jsx)("nav",{className:"px-2 space-y-1",children:g.map(e=>{let s=c.pathname.startsWith(e.href);return(0,a.jsxs)(p(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-base font-medium rounded-md"),children:[(0,a.jsx)(e.icon,{className:"mr-4 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})}),(0,a.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,a.jsx)("div",{className:"flex flex-col w-64",children:(0,a.jsxs)("div",{className:"flex flex-col h-0 flex-1",children:[(0,a.jsx)("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary-800",children:(0,a.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto bg-primary-700",children:(0,a.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:g.map(e=>{let s=c.pathname.startsWith(e.href);return(0,a.jsxs)(p(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[(0,a.jsx)(e.icon,{className:"mr-3 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})})}),(0,a.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[(0,a.jsxs)("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>l(!0),children:[(0,a.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,a.jsx)(h.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[(0,a.jsx)("div",{className:"flex-1 flex items-center"}),(0,a.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-gray-700 mr-4",children:null==o?void 0:o.email}),(0,a.jsx)("button",{onClick:m,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Sign out"})]})})]})]}),(0,a.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none p-6",children:s})]})]})}},83858:function(e,s,t){"use strict";t.d(s,{h:function(){return c}});var a=t(29217);class r extends Error{constructor(e,s=500,t=null){super(e),this.name="ApiError",this.status=s,this.data=t}}async function n(e){try{let s=await e.json();return new r(s.message||e.statusText||"API Error",e.status,s)}catch(s){return new r(e.statusText||"API Error",e.status)}}async function i(){try{let e=await a.g.currentSession(),s=e.getIdToken().getJwtToken();return{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}catch(e){return{"Content-Type":"application/json"}}}async function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=await i(),a=await fetch("".concat("https://e9fra35uv2.execute-api.eu-west-1.amazonaws.com/dev/").concat(e),{...s,headers:{...t,...s.headers||{}}});if(!a.ok)throw await n(a);return a.json()}catch(e){if(e instanceof r)throw e;if(e instanceof Error)throw new r(e.message);throw new r("An unexpected error occurred")}}let c={get:e=>l(e,{method:"GET"}),post:(e,s)=>l(e,{method:"POST",body:JSON.stringify(s)}),put:(e,s)=>l(e,{method:"PUT",body:JSON.stringify(s)}),delete:e=>l(e,{method:"DELETE"})}},39227:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(85893),r=t(67294),n=t(16678),i=t(32662),l=t(9008),c=t.n(l),o=t(83858),d=t(88767);function m(){let{user:e,loading:s}=(0,n.a)(),[t,l]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1),{data:p,isLoading:f}=(0,d.useQuery)("userProfile",()=>o.h.get("/users/me"),{enabled:!!e,onSuccess:e=>{x(e.name||"")}}),y=async e=>{e.preventDefault();try{await o.h.put("/users/me",{name:m}),l(!1),u(!0),setTimeout(()=>u(!1),3e3)}catch(e){console.error("Failed to update profile",e)}};return s||f?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Profile | TaskMonk"})}),(0,a.jsxs)(i.Z,{children:[(0,a.jsx)("div",{className:"pb-5 border-b border-gray-200",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Your Profile"})}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:[h&&(0,a.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Profile updated successfully!"})})})}),(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Personal Information"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Your personal details and account information."})]}),t?(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsx)("form",{onSubmit:y,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),(0,a.jsx)("input",{type:"text",id:"name",value:m,onChange:e=>x(e.target.value),className:"form-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",value:(null==e?void 0:e.email)||"",disabled:!0,className:"form-input bg-gray-50"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>l(!1),className:"btn btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})})}):(0,a.jsxs)("div",{className:"border-t border-gray-200",children:[(0,a.jsxs)("dl",{children:[(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null==p?void 0:p.name)||"Not set"})]}),(0,a.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:null==e?void 0:e.email})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null==p?void 0:p.role)||"User"})]}),(0,a.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Team"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null==p?void 0:p.teamId)?"Assigned":"Not assigned to any team"})]})]}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:(0,a.jsx)("button",{type:"button",onClick:()=>l(!0),className:"btn btn-primary",children:"Edit Profile"})})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Account Security"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Manage your password and security settings."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"For security reasons, you can change your password through the AWS Cognito service."}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.open("https://aws.amazon.com/cognito/","_blank"),children:"Change Password"})]})})]})]})]})}}},function(e){e.O(0,[814,249,774,888,179],function(){return e(e.s=99813)}),_N_E=e.O()}]);