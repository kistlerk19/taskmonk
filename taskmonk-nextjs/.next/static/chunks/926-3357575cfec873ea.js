"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{32662:function(e,s,a){a.d(s,{Z:function(){return b}});var t=a(85893),r=a(67294),n=a(44080),i=a(46125),l=a(42237),c=a(13564),o=a(7543),m=a(13658),d=a(30097),x=a(31415),h=a(43407),u=a(41664),f=a.n(u),p=a(11163),y=a(16678);let j=[{name:"Dashboard",href:"/dashboard",icon:l.Z},{name:"Tasks",href:"/tasks",icon:c.Z},{name:"Teams",href:"/teams",icon:o.Z},{name:"Reports",href:"/reports",icon:m.Z},{name:"Profile",href:"/profile",icon:d.Z}];function b(e){let{children:s}=e,[a,l]=(0,r.useState)(!1),c=(0,p.useRouter)(),{user:o,signOut:m}=(0,y.a)(),d=async()=>{await m(),c.push("/auth/signin")};return(0,t.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[(0,t.jsx)(n.u.Root,{show:a,as:r.Fragment,children:(0,t.jsxs)(i.V,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:l,children:[(0,t.jsx)(n.u.Child,{as:r.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)(i.V.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,t.jsx)(n.u.Child,{as:r.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,t.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-primary-700",children:[(0,t.jsx)(n.u.Child,{as:r.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,t.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>l(!1),children:[(0,t.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,t.jsx)(x.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center px-4",children:(0,t.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,t.jsx)("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:(0,t.jsx)("nav",{className:"px-2 space-y-1",children:j.map(e=>{let s=c.pathname.startsWith(e.href);return(0,t.jsxs)(f(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-base font-medium rounded-md"),children:[(0,t.jsx)(e.icon,{className:"mr-4 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})}),(0,t.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})}),(0,t.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,t.jsx)("div",{className:"flex flex-col w-64",children:(0,t.jsxs)("div",{className:"flex flex-col h-0 flex-1",children:[(0,t.jsx)("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-primary-800",children:(0,t.jsx)("h1",{className:"text-white text-2xl font-bold",children:"TaskMonk"})}),(0,t.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto bg-primary-700",children:(0,t.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:j.map(e=>{let s=c.pathname.startsWith(e.href);return(0,t.jsxs)(f(),{href:e.href,className:"".concat(s?"bg-primary-800 text-white":"text-primary-100 hover:bg-primary-600"," group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[(0,t.jsx)(e.icon,{className:"mr-3 flex-shrink-0 h-6 w-6 text-primary-300","aria-hidden":"true"}),e.name]},e.name)})})})]})})}),(0,t.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[(0,t.jsxs)("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden",onClick:()=>l(!0),children:[(0,t.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,t.jsx)(h.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,t.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center"}),(0,t.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-gray-700 mr-4",children:null==o?void 0:o.email}),(0,t.jsx)("button",{onClick:d,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"Sign out"})]})})]})]}),(0,t.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none p-6",children:s})]})]})}},5091:function(e,s,a){a.d(s,{Z:function(){return c}});var t=a(85893),r=a(67294),n=a(11163),i=a(88767),l=a(83858);function c(e){let{teamId:s}=e,a=(0,n.useRouter)(),c=(0,i.useQueryClient)(),o=!!s,[m,d]=(0,r.useState)({name:"",description:"",members:[]}),[x,h]=(0,r.useState)(""),{data:u,isLoading:f}=(0,i.useQuery)(["team",s],()=>l.h.get("/teams/".concat(s)),{enabled:o,onSuccess:e=>{d({name:e.name,description:e.description,members:e.members})}}),p=(0,i.useMutation)(e=>l.h.post("/teams",e),{onSuccess:()=>{c.invalidateQueries("teams"),a.push("/teams")},onError:e=>{h(e.message||"Failed to create team")}}),y=(0,i.useMutation)(e=>l.h.put("/teams/".concat(s),e),{onSuccess:()=>{c.invalidateQueries(["team",s]),c.invalidateQueries("teams"),a.push("/teams/".concat(s))},onError:e=>{h(e.message||"Failed to update team")}}),j=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a}))},b=async e=>{e.preventDefault(),h("");try{o?await y.mutateAsync(m):await p.mutateAsync(m)}catch(e){}};return o&&f?(0,t.jsx)("div",{className:"text-center py-4",children:"Loading team..."}):(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,t.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:o?"Edit Team":"Create New Team"})}),x&&(0,t.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mx-6",children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:x})})})}),(0,t.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,t.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"form-label",children:"Team Name"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:m.name,onChange:j,required:!0,className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",rows:3,value:m.description,onChange:j,className:"form-input"})]}),o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Team Members"}),(0,t.jsxs)("div",{className:"mt-1 bg-gray-50 p-4 rounded-md",children:[m.members&&m.members.length>0?(0,t.jsx)("ul",{className:"divide-y divide-gray-200",children:m.members.map(e=>(0,t.jsxs)("li",{className:"py-3 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.role})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No members in this team yet."}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{type:"button",onClick:()=>a.push("/teams/".concat(s,"/invite")),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Invite Members"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a.back(),className:"btn btn-secondary",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:p.isLoading||y.isLoading,className:"btn btn-primary",children:p.isLoading||y.isLoading?"Saving...":o?"Update Team":"Create Team"})]})]})})]})}},83858:function(e,s,a){a.d(s,{h:function(){return c}});var t=a(29217);class r extends Error{constructor(e,s=500,a=null){super(e),this.name="ApiError",this.status=s,this.data=a}}async function n(e){try{let s=await e.json();return new r(s.message||e.statusText||"API Error",e.status,s)}catch(s){return new r(e.statusText||"API Error",e.status)}}async function i(){try{let e=await t.g.currentSession(),s=e.getIdToken().getJwtToken();return{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}catch(e){return{"Content-Type":"application/json"}}}async function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await i(),t=await fetch("".concat("https://e9fra35uv2.execute-api.eu-west-1.amazonaws.com/dev/").concat(e),{...s,headers:{...a,...s.headers||{}}});if(!t.ok)throw await n(t);return t.json()}catch(e){if(e instanceof r)throw e;if(e instanceof Error)throw new r(e.message);throw new r("An unexpected error occurred")}}let c={get:e=>l(e,{method:"GET"}),post:(e,s)=>l(e,{method:"POST",body:JSON.stringify(s)}),put:(e,s)=>l(e,{method:"PUT",body:JSON.stringify(s)}),delete:e=>l(e,{method:"DELETE"})}}}]);